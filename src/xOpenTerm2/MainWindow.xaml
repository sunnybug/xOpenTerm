<Window x:Class="xOpenTerm2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="xOpenTerm2" Height="600" Width="1000"
        Background="{StaticResource BgDark}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <!-- 顶栏菜单 -->
        <Menu Grid.Row="0" Background="{StaticResource BgSidebar}" Foreground="{StaticResource TextPrimary}" Padding="4,2">
            <MenuItem Header="设置">
                <MenuItem Header="登录凭证" Click="MenuCredentials_Click"/>
                <MenuItem Header="隧道管理" Click="MenuTunnels_Click"/>
            </MenuItem>
            <MenuItem Header="帮助">
                <MenuItem Header="关于" Click="MenuAbout_Click"/>
                <MenuItem Header="检查更新" Click="MenuUpdate_Click"/>
            </MenuItem>
        </Menu>
        <Grid Grid.Row="1">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260" MinWidth="180"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- 左侧：服务器树 -->
        <Border Grid.Column="0" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,1,0"
                Background="{StaticResource BgSidebar}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0" Text="服务器" Margin="12,10,12,6" Foreground="{StaticResource TextPrimary}" FontWeight="SemiBold"/>
                <TextBox x:Name="SearchBox" Grid.Row="1" Margin="8,0,8,8" Padding="8,6"
                         Background="#1e293b" Foreground="{StaticResource TextPrimary}" CaretBrush="{StaticResource TextPrimary}"
                         BorderBrush="{StaticResource BorderBrush}" BorderThickness="1"
                         TextChanged="SearchBox_TextChanged">
                    <TextBox.Style>
                        <Style TargetType="TextBox">
                            <Setter Property="Tag" Value="搜索连接..."/>
                        </Style>
                    </TextBox.Style>
                </TextBox>
                <TreeView x:Name="ServerTree" Grid.Row="2" Margin="4,0,4,8"
                          Background="Transparent" Foreground="{StaticResource TextPrimary}"
                          BorderThickness="0" SelectedItemChanged="ServerTree_SelectedItemChanged"
                          MouseDoubleClick="ServerTree_MouseDoubleClick" MouseRightButtonDown="ServerTree_MouseRightButtonDown"
                          ContextMenuOpening="ServerTree_ContextMenuOpening"
                          AllowDrop="True" PreviewMouseLeftButtonDown="ServerTree_PreviewMouseLeftButtonDown"
                          PreviewMouseMove="ServerTree_PreviewMouseMove" DragOver="ServerTree_DragOver" Drop="ServerTree_Drop"/>
            </Grid>
        </Border>

        <GridSplitter Grid.Column="1" Width="4" HorizontalAlignment="Center" VerticalAlignment="Stretch"
                      Background="{StaticResource BorderBrush}"/>

        <!-- 右侧：标签 + 终端 -->
        <TabControl x:Name="TabsControl" Grid.Column="2" Padding="0" Margin="0"
                    Background="{StaticResource BgDark}" BorderThickness="0"/>
        </Grid>
    </Grid>
</Window>
