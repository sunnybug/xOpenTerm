<UserControl x:Class="xOpenTerm.Controls.SshStatusBarControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="{StaticResource BgSidebar}" Padding="8,4"
             BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,1,0,0">
    <UserControl.Resources>
        <!-- 状态栏空白右键菜单：与 Tab 右键菜单分离，非流量区域不显示 Tab 菜单 -->
        <ContextMenu x:Key="SshStatusBarEmptyContextMenu"/>
        <!-- 流量区域右键菜单：显示进程流量（按流量大小排序） -->
        <ContextMenu x:Key="SshStatusBarTrafficContextMenu">
            <MenuItem Header="查看进程流量(_P)" Click="MenuItemProcessTraffic_Click"/>
        </ContextMenu>
        <!-- 磁盘区域右键菜单：查找占用空间最大的文件/目录 -->
        <ContextMenu x:Key="SshStatusBarDiskContextMenu">
            <MenuItem Header="查找占用空间最大的文件/目录(_F)" Click="MenuItemLargestFiles_Click"/>
        </ContextMenu>
    </UserControl.Resources>
    <Grid ContextMenu="{StaticResource SshStatusBarEmptyContextMenu}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="8"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="8"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="8"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="8"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="8"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="8"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="8"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <!-- 连接状态 -->
        <StackPanel Grid.Column="0" Orientation="Horizontal">
            <TextBlock Text="状态:" Foreground="{StaticResource TextSecondary}" Margin="0,0,4,0" VerticalAlignment="Center"/>
            <TextBlock x:Name="StatusText" Text="—" Foreground="{StaticResource TextPrimary}" VerticalAlignment="Center"/>
        </StackPanel>
        <!-- CPU -->
        <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
            <TextBlock Text="CPU:" Foreground="{StaticResource TextSecondary}" Margin="0,0,4,0" VerticalAlignment="Center"/>
            <TextBlock x:Name="CpuText" Text="—%" Foreground="{StaticResource TextPrimary}" Margin="0,0,4,0" VerticalAlignment="Center"/>
            <Border Background="{StaticResource BgInput}" CornerRadius="4" Padding="4,2" MinWidth="60" MinHeight="20">
                <Canvas x:Name="CpuChart" ClipToBounds="True"/>
            </Border>
        </StackPanel>
        <!-- 内存 -->
        <StackPanel Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Center">
            <TextBlock Text="内存:" Foreground="{StaticResource TextSecondary}" Margin="0,0,4,0" VerticalAlignment="Center"/>
            <TextBlock x:Name="MemText" Text="—%" Foreground="{StaticResource TextPrimary}" Margin="0,0,4,0" VerticalAlignment="Center"/>
            <Border Background="{StaticResource BgInput}" CornerRadius="4" Padding="4,2" MinWidth="60" MinHeight="20">
                <Canvas x:Name="MemChart" ClipToBounds="True"/>
            </Border>
        </StackPanel>
        <!-- 下载（流量区域：独立右键菜单） -->
        <StackPanel Grid.Column="6" Orientation="Horizontal" VerticalAlignment="Center"
                    ContextMenu="{StaticResource SshStatusBarTrafficContextMenu}">
            <TextBlock Text="下载:" Foreground="{StaticResource TextSecondary}" Margin="0,0,4,0" VerticalAlignment="Center"/>
            <TextBlock x:Name="RxText" Text="—" Foreground="{StaticResource TextPrimary}" Margin="0,0,4,0" VerticalAlignment="Center"/>
            <Border Background="{StaticResource BgInput}" CornerRadius="4" Padding="4,2" MinWidth="80" MinHeight="20">
                <Canvas x:Name="RxChart" ClipToBounds="True"/>
            </Border>
        </StackPanel>
        <!-- 上传（流量区域：独立右键菜单） -->
        <StackPanel Grid.Column="8" Orientation="Horizontal" VerticalAlignment="Center"
                    ContextMenu="{StaticResource SshStatusBarTrafficContextMenu}">
            <TextBlock Text="上传:" Foreground="{StaticResource TextSecondary}" Margin="0,0,4,0" VerticalAlignment="Center"/>
            <TextBlock x:Name="TxText" Text="—" Foreground="{StaticResource TextPrimary}" Margin="0,0,4,0" VerticalAlignment="Center"/>
            <Border Background="{StaticResource BgInput}" CornerRadius="4" Padding="4,2" MinWidth="80" MinHeight="20">
                <Canvas x:Name="TxChart" ClipToBounds="True"/>
            </Border>
        </StackPanel>
        <!-- TCP -->
        <StackPanel Grid.Column="10" Orientation="Horizontal" VerticalAlignment="Center">
            <TextBlock Text="TCP:" Foreground="{StaticResource TextSecondary}" Margin="0,0,4,0" VerticalAlignment="Center"/>
            <TextBlock x:Name="TcpText" Text="—" Foreground="{StaticResource TextPrimary}" VerticalAlignment="Center"/>
        </StackPanel>
        <!-- UDP -->
        <StackPanel Grid.Column="12" Orientation="Horizontal" VerticalAlignment="Center">
            <TextBlock Text="UDP:" Foreground="{StaticResource TextSecondary}" Margin="0,0,4,0" VerticalAlignment="Center"/>
            <TextBlock x:Name="UdpText" Text="—" Foreground="{StaticResource TextPrimary}" VerticalAlignment="Center"/>
        </StackPanel>
        <!-- 磁盘（按物理硬盘，每3分钟更新，无前缀以节省空间；独立右键菜单） -->
        <StackPanel Grid.Column="14" Orientation="Horizontal" VerticalAlignment="Center"
                    ContextMenu="{StaticResource SshStatusBarDiskContextMenu}">
            <TextBlock x:Name="DiskText" Text="—" Foreground="{StaticResource TextPrimary}" VerticalAlignment="Center" TextTrimming="CharacterEllipsis" MaxWidth="200"/>
        </StackPanel>
    </Grid>
</UserControl>
